<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>练习</title>
</head>
<body>
输入用户名<input type="text" id="nametxt"/>
输入密码<input type="text" id="passwordtxt"/>
确认密码<input type="text" id="passwordtxt1"/>
<input type="button" id="btn1" value="注册"/>
<script>
    var Textname=document.getElementById("nametxt");
    var Textpassword=document.getElementById("passwordtxt");
    var Textpassword1=document.getElementById("passwordtxt1");
    var Btn1=document.getElementById("btn1");
    Btn1.onclick=function () {

    }
    //get方式
//  var xhr;
//  Textname.onblur=function () {
//      var oName=Textname.value;
//    
//      if(window.XMLHttpRequest){
//          xhr=new XMLHttpRequest();
//      }else{
//          xhr=new ActiveXObject("Microsoft.XMLHTTP");
//      }
//      xhr.onreadystatechange=function () {
//          if(xhr.readyState==4){
//              if(xhr.status==200){
//                  var STr=xhr.responseText;
//                  var result=eval("("+STr+")");
////                  alert(result);
//                  if(result==1){
//                      alert("用户名存在");
//                  }else{
//                      alert("可用");
//                  }
//              }
//          }else{
//
//          }
//      }
//      xhr.open("get","http://localhost:8080/user/CheckUserNameGet?username="+oName,true);
//      xhr.send();
//    
//  }
//post方式
    Textname.onblur=function () {
        var oName=Textname.value;
      	var xhr;
        if(window.XMLHttpRequest){
            xhr=new XMLHttpRequest();
        }else{
            xhr=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhr.onreadystatechange=function () {
            if(xhr.readyState==4){
                if(xhr.status==200){
                    var STr=xhr.responseText;
                    var result=eval("("+STr+")");
//                  alert(result);
                    if(result==1){
                        alert("用户名存在");
                    }else{
                        alert("可用");
                    }
                }
            }else{

            }
        }
        xhr.open("post","http://localhost:8080/user/CheckUserNameGet",true);
        xhr.setRequestHeader("Content-type","application/x-www-from-urlencoded");
        xhr.send("username="+oName");
    }
</script>
</body>
</html>